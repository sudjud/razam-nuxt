import{_ as B,a as T,B as j}from"./CiyOq8v5.js";import{_ as q,k as g,z as D,A as i,c as t,a as r,h as m,t as o,f as I,d as S,F as f,e as k,C as V,j as E,o as s,u as N,E as z,n as F,g as L}from"./CwPa8t4P.js";import{u as M}from"./C8oepDnK.js";import{u as x}from"./CqUlVQab.js";import"./DXW4p8mD.js";const G={key:0},H={key:0},J={key:1,class:"articles"},K={key:2},O={key:1,class:"no-results"},Q={key:2,class:"pagination"},U=["disabled"],W=["onClick"],X=["disabled"],v=6,Y={__name:"search",setup(Z){const b=V(),n=g([]),a=g(1),p=g(null),{locale:R}=x();D(async()=>{const e=b.query.q||"";if(!e){n.value=[];return}const{data:l}=await M(`search-${e}`,()=>{$fetch(`/api/search?q=${e}&lang=${R.value}`)});console.log("Raw data from API:",l.value),n.value=Array.isArray(l.value)?l.value:[],console.log("Search results after processing:",n.value)});const c=i(()=>n.value.filter(e=>e.type==="blog")),d=i(()=>n.value.filter(e=>e.type==="project")),h=i(()=>{const e=c.value.length+d.value.length;return e>0?Math.ceil(e/v):1}),$=i(()=>{if(!Array.isArray(c.value))return[];const e=(a.value-1)*v;return c.value.slice(e,e+v)});i(()=>{if(!Array.isArray(d.value))return[];const e=(a.value-1)*v;return d.value.slice(e,e+v)});const _=()=>{L(()=>{p.value&&p.value.scrollIntoView({behavior:"smooth"})})},A=()=>{a.value<h.value&&(a.value++,_())},C=()=>{a.value>1&&(a.value--,_())},P=e=>{a.value=e,_()};return(e,l)=>{const w=E("reveal");return s(),t(f,null,[r("main",null,[r("p",null,o(e.$t("menu.home"))+" / "+o(e.$t("menu.searchResults")),1),r("h1",null,[I((s(),t("span",{class:"wow reveal-bb reveal-visible",ref_key:"resultsSection",ref:p},[S(o(e.$t("menu.searchResults")),1)])),[[w]])])]),n.value.length>0?(s(),t("section",G,[c.value.length>0?(s(),t("h2",H,o(e.$t("search.blogResults")),1)):m("",!0),c.value.length>0?(s(),t("div",J,[(s(!0),t(f,null,k($.value,(u,y)=>(s(),N(j,z({key:`blog-${y}`,ref_for:!0},u),null,16))),128))])):m("",!0),d.value.length>0?(s(),t("h2",K,o(e.$t("search.projectResults")),1)):m("",!0)])):(s(),t("div",O,[r("p",null,o(e.$t("search.noResults")),1)])),h.value>1?(s(),t("div",Q,[r("button",{onClick:C,disabled:a.value===1},l[0]||(l[0]=[r("img",{src:B,alt:""},null,-1)]),8,U),(s(!0),t(f,null,k(h.value,u=>(s(),t("div",{key:u,class:F(["page-number",{current:u===a.value}]),onClick:y=>P(u)},o(u),11,W))),128)),r("button",{onClick:A,disabled:a.value===h.value},l[1]||(l[1]=[r("img",{src:T,alt:""},null,-1)]),8,X)])):m("",!0)],64)}}},re=q(Y,[["__scopeId","data-v-92f07586"]]);export{re as default};
