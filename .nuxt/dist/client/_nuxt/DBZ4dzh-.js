import{_ as j,m,c as i,o as c,d as a,h as v,i as r,t as n,f as u,a3 as b,F as C,b as U,a4 as _,E as p,e as w,v as K,n as N,D as q}from"./BOr2hJtH.js";import{P}from"./Bv4YZ1W9.js";const S={class:"calculator-wrapper"},D={key:0,class:"design-or-repair"},I={class:"prompt"},M={class:"design-or-repair_wrapper"},B={key:1},F={class:"object-type"},z={class:"prompt"},E=["value"],O={class:"object-details"},R=["placeholder"],J=["placeholder"],L=["placeholder"],Y={class:"kitchen"},A={key:2,class:"contact-info"},G=["placeholder"],H=["placeholder"],Q=["placeholder"],W={key:3,class:"confirmation"},X={class:"buttons"},Z=["type","disabled"],x={__name:"CostCalculator",setup(ee){const s=m(1),f=m(null),e=m({design:!1,renovation:!1,objectType:"",area:null,bathrooms:null,rooms:null,hasKitchen:!1,name:"",phone:"",email:"",message:"",accepted:!1}),h=m(!1),g={apartment:"calculator.objectType.apartment",public:"calculator.objectType.public",office:"calculator.objectType.office"},y=async()=>{const t="https://formspree.io/f/mnndzqeq",l={name:e.value.name,phone:e.value.phone,email:e.value.email,message:e.value.message,direction:`${e.value.design?"Design ":""}${e.value.renovation?"Renovation":""}`,objectType:e.value.objectType,area:e.value.area,bathrooms:e.value.bathrooms,rooms:e.value.rooms,hasKitchen:e.value.hasKitchen?"Yes":"No"};try{const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),d=await o.json();o.ok?(h.value=!0,setTimeout(()=>{h.value=!1},5e3),e.value={design:!1,renovation:!1,objectType:"",area:null,bathrooms:null,rooms:null,hasKitchen:!1,name:"",phone:"",email:"",message:"",accepted:!1},s.value=1):console.error("Ошибка при отправке формы: ",d)}catch(o){console.error("Ошибка запроса: ",o)}},$=()=>{s.value<2&&s.value++},k=()=>{s.value>1&&s.value--},V=()=>{s.value===2?y():$()};return(t,l)=>(c(),i("div",S,[a("form",{class:"calculator",onSubmit:q(y,["prevent"])},[a("h3",null,[r(n(t.$t("calculator.h1"))+" ",1),l[12]||(l[12]=a("br",null,null,-1)),r(" "+n(t.$t("calculator.h2")),1)]),s.value===1?(c(),i("section",D,[a("span",I,n(t.$t("calculator.prompt1")),1),a("div",M,[a("label",null,[u(a("input",{type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=o=>e.value.design=o)},null,512),[[b,e.value.design]]),r(" "+n(t.$t("calculator.directions.design")),1)]),a("label",null,[u(a("input",{type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=o=>e.value.renovation=o)},null,512),[[b,e.value.renovation]]),r(" "+n(t.$t("calculator.directions.renovation")),1)])])])):v("",!0),s.value===1?(c(),i("section",B,[a("div",F,[a("span",z,n(t.$t("calculator.prompt2")),1),(c(),i(C,null,U(g,(o,d)=>a("label",{key:d},[u(a("input",{type:"radio",name:"objectType",value:d,"onUpdate:modelValue":l[2]||(l[2]=T=>e.value.objectType=T)},null,8,E),[[_,e.value.objectType]]),r(" "+n(t.$t(o)),1)])),64))]),a("div",O,[a("label",null,[u(a("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=o=>e.value.area=o),min:"0",placeholder:t.$t("calculator.params.area")+" (м²)"},null,8,R),[[p,e.value.area,void 0,{number:!0}]])]),a("label",null,[u(a("input",{type:"number","onUpdate:modelValue":l[4]||(l[4]=o=>e.value.bathrooms=o),min:"0",placeholder:t.$t("calculator.params.bathrooms")},null,8,J),[[p,e.value.bathrooms,void 0,{number:!0}]])]),a("label",null,[u(a("input",{type:"number","onUpdate:modelValue":l[5]||(l[5]=o=>e.value.rooms=o),min:"0",placeholder:t.$t("calculator.params.rooms")},null,8,L),[[p,e.value.rooms,void 0,{number:!0}]])]),a("label",Y,[u(a("input",{type:"checkbox","onUpdate:modelValue":l[6]||(l[6]=o=>e.value.hasKitchen=o)},null,512),[[b,e.value.hasKitchen]]),r(" "+n(t.$t("calculator.params.kitchen")),1)])])])):v("",!0),s.value===2?(c(),i("section",A,[u(a("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=o=>e.value.name=o),placeholder:t.$t("calculator.contact.name"),required:""},null,8,G),[[p,e.value.name]]),w(P,{modelValue:e.value.phone,"onUpdate:modelValue":l[8]||(l[8]=o=>e.value.phone=o),ref_key:"phoneInput",ref:f},null,8,["modelValue"]),u(a("input",{type:"email","onUpdate:modelValue":l[9]||(l[9]=o=>e.value.email=o),placeholder:t.$t("calculator.contact.email"),required:""},null,8,H),[[p,e.value.email]]),u(a("textarea",{"onUpdate:modelValue":l[10]||(l[10]=o=>e.value.message=o),placeholder:t.$t("calculator.contact.message")},null,8,Q),[[p,e.value.message]])])):v("",!0),s.value===2?(c(),i("section",W,[a("label",null,[u(a("input",{type:"checkbox","onUpdate:modelValue":l[11]||(l[11]=o=>e.value.accepted=o),required:""},null,512),[[b,e.value.accepted]]),r(" "+n(t.$t("calculator.confirmation")),1)])])):v("",!0),a("div",X,[u(a("button",{class:"prev-button",onClick:k,type:"button"},n(t.$t("calculator.prev")),513),[[K,s.value===2]]),a("p",{class:N([{submit:h.value},"success-message"])},n(t.$t("calculator.success")),3),a("button",{class:"next-submit",onClick:V,type:s.value===2?"submit":"button",disabled:s.value===1&&(!e.value.objectType||!e.value.design&&!e.value.renovation||!e.value.area||!e.value.bathrooms||!e.value.rooms)||s.value===2&&(!e.value.name||!e.value.email||!e.value.accepted)},n(s.value===2?t.$t("calculator.button"):t.$t("calculator.next")),9,Z)])],32)]))}},oe=j(x,[["__scopeId","data-v-f5ab99e5"]]);export{oe as C};
