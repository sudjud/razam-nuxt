{"file":"search.mjs","mappings":";;AAIA,SAAS,UAAU,OAAO;AACxB,SAAO,OAAO,UAAU,YAAY,MAAM,SAAS,GAAG;AACxD;AAEA,SAAS,SAAS,OAAO,GAAG,QAAQ;AAC9B,MAAA,UAAU,KAAK,GAAG;AACb,WAAA,EAAE,OAAO,MAAM;AAAA,EAAA;AAEjB,SAAA;AACT;AAEgB,SAAA,cAAc,OAAO,QAAQ,GAAG;AAC9C,MAAI,CAAC,MAAM,KAAK,UAAU,CAAC;AAE3B,QAAM,IAAI,MAAM,KAAK,EAAE,YAAY;AACnC,QAAM,UAAU,CAAC;AAGjB,aAAW,WAAW,UAAU;AAC9B,UAAM,cAAc;AAAA,MAClB,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,IAAI,QAAQ,UAAU,CAAA,GAAI,IAAI,CAAA,QAAO,IAAI,IAAI;AAAA,IAC/C;AAEM,UAAA,iBAAiB,YAAY,KAAK,CAAO,QAAA;AAC7C,YAAM,aAAa,SAAS,KAAK,GAAG,MAAM,EAAE,YAAY;AACjD,aAAA,WAAW,SAAS,CAAC;AAAA,IAAA,CAC7B;AAED,QAAI,gBAAgB;AAClB,cAAQ,KAAK;AAAA,QACX,MAAM;AAAA,QACN,UAAU,QAAQ;AAAA,QAClB,MAAM,QAAQ;AAAA,QACd,MAAM,QAAQ;AAAA,QACd,SAAS,QAAQ;AAAA,QACjB,MAAM,QAAQ;AAAA,QACd,aAAa,QAAQ;AAAA,MAAA,CACtB;AAAA,IAAA;AAAA,EACH;AAIF,aAAW,WAAWA,UAAM;AACpB,UAAA,UAAU,MAAM,QAAQ,QAAQ,IAAI,IAAI,QAAQ,OAAO,CAAC;AAC9D,UAAM,cAAc,CAAC,QAAQ,MAAM,QAAQ,UAAU,GAAG,OAAO;AAEzD,UAAA,iBAAiB,YAAY,KAAK,CAAO,QAAA;AAC7C,YAAM,aAAa,SAAS,KAAK,GAAG,MAAM,EAAE,YAAY;AACjD,aAAA,WAAW,SAAS,CAAC;AAAA,IAAA,CAC7B;AAED,QAAI,gBAAgB;AAClB,cAAQ,KAAK;AAAA,QACX,MAAM;AAAA,QACN,MAAM,QAAQ;AAAA,QACd,MAAM,QAAQ;AAAA,QACd,YAAY,QAAQ;AAAA,QACpB,UAAU,QAAQ;AAAA,QAClB,IAAI,QAAQ;AAAA,QACZ,MAAM,QAAQ;AAAA,MAAA,CACf;AAAA,IAAA;AAAA,EACH;AAGK,SAAA;AACT;","names":["blog"],"sources":["../../../../utils/search.js"],"sourcesContent":["import projects from '~/server/data/projects'\r\nimport blog from '~/server/data/blog'\r\n\r\n// Проверка: является ли строка ключом для i18n\r\nfunction isI18nKey(value) {\r\n  return typeof value === 'string' && value.includes('.')\r\n}\r\n\r\nfunction localize(value, t, locale) {\r\n  if (isI18nKey(value)) {\r\n    return t(value, locale)\r\n  }\r\n  return value\r\n}\r\n\r\nexport function searchContent(query, locale, t) {\r\n  if (!query.trim()) return []\r\n\r\n  const q = query.trim().toLowerCase()\r\n  const results = []\r\n\r\n  // Поиск по проектам\r\n  for (const project of projects) {\r\n    const keysToCheck = [\r\n      project.name,\r\n      project.category,\r\n      project.type,\r\n      project.workingTime,\r\n      project.client,\r\n      project.dislocation,\r\n      project.desc,\r\n      ...(project.images || []).map(img => img.name)\r\n    ]\r\n\r\n    const projectMatches = keysToCheck.some(key => {\r\n      const translated = localize(key, t, locale).toLowerCase()\r\n      return translated.includes(q)\r\n    })\r\n\r\n    if (projectMatches) {\r\n      results.push({\r\n        type: 'project',\r\n        category: project.category,\r\n        slug: project.slug,\r\n        name: project.name,\r\n        preview: project.preview,\r\n        year: project.year,\r\n        dislocation: project.dislocation\r\n      })\r\n    }\r\n  }\r\n\r\n  // Поиск по статьям\r\n  for (const article of blog) {\r\n    const tagKeys = Array.isArray(article.tags) ? article.tags : []\r\n    const keysToCheck = [article.name, article.category, ...tagKeys]\r\n\r\n    const articleMatches = keysToCheck.some(key => {\r\n      const translated = localize(key, t, locale).toLowerCase()\r\n      return translated.includes(q)\r\n    })\r\n\r\n    if (articleMatches) {\r\n      results.push({\r\n        type: 'article',\r\n        slug: article.slug,\r\n        name: article.name,\r\n        previewImg: article.previewImg,\r\n        category: article.category,\r\n        by: article.by,\r\n        date: article.date\r\n      })\r\n    }\r\n  }\r\n\r\n  return results\r\n}\r\n"],"version":3}